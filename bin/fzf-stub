#!/usr/bin/env php
<?php

$stub = new class {
    protected array $args = [];

    public int $exitCode = 0;
    public string $output = '';

    public function __invoke(array $args)
    {
        $this->args = $args;

        $mode = ucfirst(
            str_replace('-', '', $args[1] ?? 'default')
        );

        return $this->{"$mode"}();
    }

    private function stubDefault(): void
    {
        $this->output = implode(' ', $this->args);
    }

    private function stubError(): void
    {
        $this->exitCode = 1;
    }

    private function version(): void
    {
        $this->output = 'v10';
    }

    private function stubFirst(): void
    {
        $stream = fopen("php://stdin","r");
        $input = stream_get_contents($stream);

        $this->output = explode(PHP_EOL, $input)[0];
    }
};

$stub($argv);

echo $stub->output;
exit($stub->exitCode);
